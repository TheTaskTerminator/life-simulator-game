# 事件与选择设计指南

## 事件设计核心原则

**事件不是剧情，而是"你必须站队"的时刻。**

设计每个事件时自问：如果不给玩家选择，直接跳过，会更好吗？如果答案是"无所谓"，这个事件设计有问题——它没有制造真正的决策点。

好的事件特征：
- 选择 A 和选择 B 都各有合理性
- 两个选项都有代价（得到某样东西，失去另一样）
- 不选 = 更坏（每个选项都比什么都不做要好或差）

## Tag 分类与节奏设计

5 种事件 Tag，控制游戏节奏：

| Tag | 频率 | 冷却 | 设计意图 |
|-----|------|------|---------|
| `DAILY` | 高（≈40%） | 无 | 日常填充，保持游戏流动感，低影响 |
| `OPPORTUNITY` | 中（≈15%） | 2回合 | 正向机遇，但有交换代价，不能白得 |
| `CHALLENGE` | 中（≈15%） | 2回合 | 压力和危机，制造张力 |
| `SPECIAL` | 低（≈5%） | 10回合 | 转折性事件，一局只出现几次 |
| `STAGE` | 触发型 | N/A | 阶段切换时触发，叙述进入新阶段 |

### 健康的事件序列模式

```
DAILY → DAILY → CHALLENGE → DAILY → OPPORTUNITY → DAILY → DAILY → SPECIAL
```

**避免的反模式**：
- 连续 3 个 CHALLENGE → 玩家感觉被针对，失去继续游戏的动力
- 连续 3 个 OPPORTUNITY → 游戏失去张力，"躺赢"感强
- 全程 DAILY → 枯燥无聊，缺乏记忆点

## Choice 设计三要素

每个选项应当有明确的**交换条件**：

```
得到 A  +  失去 B  （或承担 C 的风险）
```

**好的 Choice 示例**：

```
事件：导师催促提交论文
选项A：全力冲刺完成论文    → 科研能力+10, 健康-15（高强度工作伤身）
选项B：请求宽限一周         → 导师好感-10（拖延让导师失望），但属性正常
```

**不好的 Choice 示例**（缺乏代价）：

```
事件：发现一本好书
选项A：认真阅读             → 智力+5
选项B：记下书名日后再看      → 无变化
```

→ 选项 B 是严格弱势选项，玩家永远选 A，没有真正的决策。

## probability 的使用时机

```typescript
{
  type: 'attribute',
  metric: 'wealth',
  value: 50,
  probability: 0.6  // 60% 概率成功
}
```

**只在以下场景使用**：
- 高风险高回报的事件（创业、投资、冒险）
- 需要体现"命运不完全可控"的特殊转折
- 强调某个选项是"赌一把"

**不要用于**：
- 日常操作（会让玩家感觉游戏在整人）
- 所有选项（让随机性淹没决策感）

## AI 驱动事件的额外约束

使用 AI 生成事件时，`available_tags` 必须作为**硬约束**传入 Prompt：

```typescript
// promptService 会在 PromptContext 中携带
eventType: availableTags.join('/'),
// Prompt 中：本次事件类型必须是以下之一：DAILY/OPPORTUNITY

// AI 不能绕过，因为引擎会校验返回的 tag
```

**为什么这样设计**：冷却机制基于 Tag，如果 AI 自由选择 Tag，它可能每次都生成 CHALLENGE，绕过冷却保护，导致节奏失控。

## 静态事件库 vs AI 生成

| 方面 | 静态事件库 | AI 生成 |
|------|-----------|---------|
| 多样性 | 有限（写多少有多少） | 无限（每次不同） |
| 质量控制 | 可精确控制 | 依赖 Prompt 质量 |
| 离线可用 | 是 | 否（需要 API） |
| 开发成本 | 高（需要大量写作） | 低（只需写好 Prompt） |
| 适合场景 | 关键节点事件、SPECIAL 事件 | 日常事件、通用场景 |

**推荐混合策略**：用静态事件库定义 SPECIAL 和 STAGE 类事件（精心设计），用 AI 生成 DAILY、OPPORTUNITY 和 CHALLENGE（保持多样性）。
